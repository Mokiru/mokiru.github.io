---
title: HyperLogLog-快速统计不同元素数量(有误差)
date: 2025-04-09 21:30:00 +0800
categories: [Java, Math]
tags: [study]     # TAG names should always be lowercase
author: momochi
# authors: [xx,xx]
description: 初识HyperLogLog
comments: true # 评论
pin: false # top 
math: true
---

## 简介&背景

HyperLogLog是一种高效算法，用于估算大型数据集合中不同元素的数量，这种数据集合被称为多重集，通常是海量数据流(只读序列)。显然，多重集的基数可以通过存储复杂度与元素数量基本成比例的算法精确计算，然而在大多数实际应用中，待处理的多重集规模很大，根本无法完全存入核心内存，此时关键思路是放宽对基数n进行精确计算的要求，转而开发专门用于近似估计n的概率算法，目前已经发展出多种仅需亚线性内存的算法，或最坏情况下仅需较小常数的线性内存算法。

所有已知的高效基数估计器都依赖于随机化技术，这通过哈希函数实现，假设待统计元素属于数据域$$D$$，我们给定哈希函数:$$h:D\rightarrow \{0,1\}^\infty$$，即将哈希值视作 $$\{0,1\}^\infty$$ 的无限二进制串，或等价于单位区间内的实数(实际应用中，32位哈希足以估计超过$$10^9$$的基数)，我们要求哈希函数的设计满足：哈希值能够高度模拟均匀随机模型，即哈希值的各个比特位相互独立且出现概率均为 $$\frac{1}{2}$$

最著名的基数估计器依赖于对输入多重集 $$M$$的哈希值 $$h(M)$$进行适当且简洁的观测，进而推断未知基数 $$n$$的合理估计值，对于由 $$\{0,1\}^\infty$$ 字符串构成的多重集(或者，$$[0,1]$$实数集) $$S\equiv h(M)$$，定义其可观测量为仅取决于 $$S$$底层集合的函数（即与元素重复无关的量）目前已研究的两大类基数可观测量包括：
- 比特模式可观测量
- 顺序统计可观测量